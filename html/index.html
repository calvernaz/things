<!DOCTYPE html>
<!-- include aframe -->
<script src="https://aframe.io/releases/0.6.0/aframe.min.js"></script>
<!-- include aframe-artoolkit -->
<script src="aframe-ar.js"></script>
<script>
	let regex = /[^TEMP0]+$/g;
	let source = new EventSource('/events/', { withCredentials: true });
	source.addEventListener('temp', (e) => {
		let textEl = document.querySelector('a-text');
		let d = JSON.parse(e.data);
		console.log(d);
		if (isNaN(d.data[0])) return;
		textEl.setAttribute('value', regex.exec(d.data[0]));
	})
</script>
<body style='margin : 0px; overflow: hidden; font-family: Monospace; '>
	<div style='position: fixed; top: 10px; width:inherit; text-align: center; z-index: 1;'></div>
	<a-scene embedded artoolkit='sourceType: webcam;'>
		<!--<a-marker type='pattern' url='pattern-marker.patt' size='1'> -->
			<a-entity>
				<a-text value="No Value"></a-text>
			</a-entity>
		<!--</a-marker> -->
		<a-marker-camera preset="hiro"></a-marker-camera>
		<a-entity camera></a-entity>
	</a-scene>
</body>
</html>
